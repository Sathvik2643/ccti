<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Code Connect</title>
  <link rel="stylesheet" href="style.css" />
  <meta name="description" content="Coaching Institute - Home of expert mentors, courses, updates and student resources." />
</head>
<body>
  <!-- NAV -->
  <header class="site-header">
    <nav class="navbar container">
      <div class="brand">Code Connect</div>
      <button class="nav-toggle" aria-label="toggle navigation">☰</button>
      <ul class="nav-links">
        <li><a href="#home">Home</a></li>
        <li><a href="#updates">Updates</a></li>
        <li><a href="#courses">Courses Offered</a></li>
        <li><a href="#student">Student Corner</a></li>
        <li><a href="#about">About Us</a></li>
      </ul>
    </nav>
  </header>

  <!-- HOME -->
  <main>
    <section id="home" class="hero">
      <div class="container hero-inner">
        <h1>Welcome to Code Connect</h1>
        <p>Expert mentors. Structured curriculum. Real results.</p>
        <a class="btn" href="#courses">Explore Courses</a>
      </div>
    </section>

    <!-- UPDATES -->
    <section id="updates" class="section">
      <div class="container">
        <h2>Updates</h2>
        <div class="grid cards">
          <article class="card">
            <h3>New Mentor — Rahul</h3>
            <p>We welcome Mr. Rahul (IIT grad) to the Physics faculty — 10+ years teaching experience.</p>
          </article>
          <article class="card">
            <h3>Achievement</h3>
            <p>Congratulations to our students for top ranks in national entrance exams.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- COURSES -->
    <section id="courses" class="section alt">
      <div class="container">
        <h2>Courses Offered</h2>
        <div class="grid cards">
          <article class="card">
            <h3>Software</h3>
            <p>C, Python, Java, SQL.<br>Data Analyst, MS Office, and more.</p>
          </article>
          <article class="card">
            <h3>VLSI</h3>
            <p>Verilog, SystemVerilog, UVM and Protocols.<br>Design and Design Verification.</p>
          </article>
          <article class="card">
            <h3>Embedded Systems</h3>
            <p>Microcontrollers, RTOS, interfacing, and hands-on projects to build strong fundamentals.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- STUDENT CORNER -->
    <section id="student" class="section">
      <div class="container">
        <h2>Student Corner</h2>

        <div class="student-actions">
          <!-- Replace the placeholder URL below with your Google Form link -->
          <a id="registerBtn" class="btn outline" href="GOOGLE_FORM_URL" target="_blank" rel="noopener noreferrer">Register</a>

          <!-- Optional: show folder with all certificates (uncomment and replace DRIVE_FOLDER_URL if you want visible folder link)
          <a id="driveBtn" class="btn outline" href="DRIVE_FOLDER_URL" target="_blank" rel="noopener noreferrer">All Certificates (Drive)</a>
          -->
        </div>

        <div class="verify-block card">
          <h3>Download / Verify Certificate</h3>
          <p>Enter Certificate ID below (example: <code>CERT2025-001</code>)</p>

          <div class="verify-input">
            <input id="certIdInput" type="text" placeholder="Enter Certificate ID" aria-label="certificate id">
            <button id="verifyBtn" class="btn">Verify</button>
          </div>

          <div id="verifyResult" class="verify-result" aria-live="polite"></div>
          <!-- If valid and file exists, we will show a download link here -->
          <div id="certFileArea" style="margin-top:12px;"></div>
        </div>

        <p class="hint">Note: The Register button opens your Google Form. The Download button (after verification) will start a download if you used Drive's direct-download URL (`uc?export=download&id=FILEID`).</p>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="section alt">
      <div class="container">
        <h2>About Us</h2>
        <p>
          We are a dedicated coaching institute focused on exam-oriented teaching for engineering aspirants.
          Our structured syllabus and experienced faculty help students reach their goals.
        </p>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="container">
      <p>© 2025 Coaching Institute — All rights reserved.</p>
    </div>
  </footer>

  <script>
    // small nav toggle for mobile
    const btn = document.querySelector('.nav-toggle');
    const nav = document.querySelector('.nav-links');
    btn && btn.addEventListener('click', () => nav.classList.toggle('open'));

    // ---------- Certificate verification logic ----------
    const verifyBtn = document.getElementById('verifyBtn');
    const certInput = document.getElementById('certIdInput');
    const resultBox = document.getElementById('verifyResult');
    const certFileArea = document.getElementById('certFileArea');

    let certificates = []; // will be loaded from certificates.json
    let certsLoaded = false;

    // show visible message when certificates.json fails
    function showLoadError() {
      resultBox.textContent = '⚠ Certificate database not loaded. Please contact admin.';
      resultBox.className = 'verify-result invalid';
    }

    // Load certificates.json on page load
    fetch('certificates.json')
      .then(res => {
        if (!res.ok) throw new Error('Could not load certificates.json');
        return res.json();
      })
      .then(data => {
        if (!Array.isArray(data)) throw new Error('certificates.json must be an array');
        certificates = data;
        certsLoaded = true;
      })
      .catch(err => {
        console.warn('certificates.json load failed:', err);
        certsLoaded = false;
      });

    function sanitizeId(s){ return String(s || '').trim().toUpperCase(); }

    function clearResultAreas(){
      certFileArea.innerHTML = '';
      resultBox.textContent = '';
      resultBox.className = 'verify-result';
    }

    verifyBtn.addEventListener('click', () => {
      clearResultAreas();
      if (!certsLoaded) {
        showLoadError();
        return;
      }

      const searchId = sanitizeId(certInput.value);
      if (!searchId) {
        resultBox.textContent = 'Please enter a Certificate ID.';
        resultBox.className = 'verify-result invalid';
        return;
      }

      const found = certificates.find(c => sanitizeId(c.id) === searchId);

      if (found) {
        const nameText = found.name ? ` — ${found.name}` : '';
        resultBox.textContent = `✔ Certificate VALID${nameText}`;
        resultBox.className = 'verify-result valid';

        if (found.file && found.file.length) {
          const a = document.createElement('a');
          a.href = found.file;
          a.target = '_blank';
          a.rel = 'noopener noreferrer';
          a.className = 'btn outline';
          a.textContent = 'Download Certificate';
          certFileArea.appendChild(a);

          const note = document.createElement('div');
          note.style.marginTop = '8px';
          note.style.color = '#6b7280';
          note.style.fontSize = '13px';
          note.textContent = 'Tip: For immediate download use a Drive direct-download link (`https://drive.google.com/uc?export=download&id=FILEID`).';
          certFileArea.appendChild(note);
        } else {
          certFileArea.textContent = 'Certificate found but no download file available.';
        }
      } else {
        resultBox.textContent = '✖ Certificate INVALID or not found';
        resultBox.className = 'verify-result invalid';
      }
    });

    // Allow Enter key to trigger verify
    certInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        verifyBtn.click();
      }
    });
  </script>
</body>
</html>
